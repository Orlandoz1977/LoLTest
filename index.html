<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Godot Game - LoL Integration</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <!-- Contenedor para el juego de Godot -->
    <div id="godot-game"></div>

    <!-- Script para cargar el juego de Godot -->
    <script type="text/javascript">
        // Configuración del juego de Godot
        var engine = new Engine();

        // Ruta al archivo .pck o .wasm exportado por Godot
        var gamePath = "LoLTest.pck"; // Cambia esto al nombre de tu archivo .pck o .wasm

        // Inicializar el motor de Godot
        engine.startGame({
            "canvas": document.getElementById("godot-game"),
            "executable": gamePath,
            "onProgress": function (current, total) {
                console.log("Cargando: " + current + " / " + total);
            },
            "onSuccess": function () {
                console.log("Juego cargado correctamente.");
            },
            "onError": function (message) {
                console.error("Error al cargar el juego: " + message);
            }
        });

        // Escuchar mensajes desde la plataforma LoL
        window.addEventListener("message", function (event) {
            console.log("Mensaje recibido desde LoL:", event.data);

            // Procesar el mensaje (puedes enviarlo al juego de Godot)
            if (engine && engine.call) {
                engine.call("receive_message", JSON.stringify(event.data));
            }
        });

        // Enviar mensajes a la plataforma LoL
        function sendMessageToLoL(messageName, payload) {
            if (window.parent) {
                window.parent.postMessage({
                    message: messageName,
                    payload: payload
                }, "*");
            }
        }

        // Ejemplo: Enviar un mensaje "READY" cuando el juego esté listo
        setTimeout(function () {
            sendMessageToLoL("READY", {
                aspectRatio: "16:9",
                resolution: "1920x1080"
            });
        }, 1000);
    </script>

    <!-- Script del motor de Godot -->
    <script src="LoLTest.js"></script> <!-- Cambia esto al nombre de tu archivo .js -->
</body>
</html>
